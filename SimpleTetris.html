<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simply Tetris</title>
    <style>
        body {
            background: #222;
            color: #fff;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #tetris {
            background: #111;
            margin: 20px auto;
            display: block;
            border: 4px solid #444;
        }
        #score {
            font-size: 1.2em;
            margin: 10px;
        }
        button {
            margin: 10px;
            padding: 8px 16px;
            font-size: 1em;
            background: #444;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background: #666;
        }
    </style>
</head>
<body>
    <h1>Simply Tetris</h1>
    <canvas id="tetris" width="240" height="400"></canvas>
    <div id="score">Score: 0</div>
    <button onclick="startGame()">Restart</button>
    <script>
        const canvas = document.getElementById('tetris');
        const ctx = canvas.getContext('2d');
        const scale = 20;
        const cols = canvas.width / scale;
        const rows = canvas.height / scale;

        // Tetromino shapes
        const tetrominos = [
            [[1,1,1,1]], // I
            [[1,1],[1,1]], // O
            [[0,1,0],[1,1,1]], // T
            [[1,0,0],[1,1,1]], // J
            [[0,0,1],[1,1,1]], // L
            [[1,1,0],[0,1,1]], // S
            [[0,1,1],[1,1,0]]  // Z
        ];
        const colors = ['cyan','yellow','purple','blue','orange','green','red'];

        let board, piece, pos, score, dropInterval, lastTime, gameOver;

        function resetBoard() {
            board = Array.from({length: rows}, () => Array(cols).fill(0));
        }

        function newPiece() {
            const idx = Math.floor(Math.random() * tetrominos.length);
            piece = tetrominos[idx];
            pos = {x: Math.floor(cols/2) - Math.ceil(piece[0].length/2), y: 0};
            piece.color = colors[idx];
        }

        function drawCell(x, y, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x*scale, y*scale, scale-1, scale-1);
        }

        function drawBoard() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            for(let y=0; y<rows; y++)
                for(let x=0; x<cols; x++)
                    if(board[y][x])
                        drawCell(x, y, board[y][x]);
            for(let y=0; y<piece.length; y++)
                for(let x=0; x<piece[y].length; x++)
                    if(piece[y][x])
                        drawCell(pos.x+x, pos.y+y, piece.color);
        }

        function collide(px=pos.x, py=pos.y, p=piece) {
            for(let y=0; y<p.length; y++)
                for(let x=0; x<p[y].length; x++)
                    if(p[y][x] &&
                        (board[py+y] && board[py+y][px+x]) ||
                        px+x<0 || px+x>=cols || py+y>=rows)
                        return true;
            return false;
        }

        function mergePiece() {
            for(let y=0; y<piece.length; y++)
                for(let x=0; x<piece[y].length; x++)
                    if(piece[y][x])
                        board[pos.y+y][pos.x+x] = piece.color;
        }

        function rotate(p) {
            return p[0].map((_,i)=>p.map(row=>row[i])).reverse();
        }

        function drop() {
            if(!gameOver) {
                pos.y++;
                if(collide()) {
                    pos.y--;
                    mergePiece();
                    clearLines();
                    newPiece();
                    if(collide()) {
                        gameOver = true;
                        alert('Game Over! Score: ' + score);
                    }
                }
                drawBoard();
            }
        }

        function clearLines() {
            let lines = 0;
            for(let y=rows-1; y>=0; y--) {
                if(board[y].every(cell=>cell)) {
                    board.splice(y,1);
                    board.unshift(Array(cols).fill(0));
                    lines++;
                    y++;
                }
            }
            score += lines*10;
            document.getElementById('score').textContent = 'Score: ' + score;
        }

        function move(dir) {
            if(!gameOver) {
                pos.x += dir;
                if(collide()) pos.x -= dir;
                drawBoard();
            }
        }

        function rotatePiece() {
            if(!gameOver) {
                const rotated = rotate(piece);
                if(!collide(pos.x, pos.y, rotated))
                    piece = rotated;
                drawBoard();
            }
        }

        function startGame() {
            resetBoard();
            score = 0;
            gameOver = false;
            newPiece();
            drawBoard();
            document.getElementById('score').textContent = 'Score: 0';
            lastTime = 0;
            dropInterval = 500;
            requestAnimationFrame(update);
        }

        function update(time=0) {
            if(gameOver) return;
            if(time - lastTime > dropInterval) {
                drop();
                lastTime = time;
            }
            requestAnimationFrame(update);
        }

        document.addEventListener('keydown', e => {
            if(gameOver) return;
            if(e.key==='ArrowLeft') move(-1);
            else if(e.key==='ArrowRight') move(1);
            else if(e.key==='ArrowDown') drop();
            else if(e.key==='ArrowUp') rotatePiece();
        });

        startGame();
    </script>
</body>
</html>